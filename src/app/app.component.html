<div class="dashboard-container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-left">
        <div class="logo">
          <span class="logo-icon"></span>
          <h1>Dashboard IoT - Sal贸n de Clases</h1>
        </div>
        <p class="subtitle">Control inteligente con Alexa</p>
      </div>
      <div class="header-right">
        <div class="time-display">
          <span class="time">{{ currentTime | date: 'HH:mm:ss' }}</span>
          <span class="date">{{ currentTime | date: 'dd/MM/yyyy' }}</span>
        </div>
        <div class="status-indicator">
          <span class="status-dot"></span>
          <span>Sistema Activo</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Sensors Section -->
    <section class="section">
      <h2 class="section-title">
        <span class="title-icon"></span>
        Mediciones en Tiempo Real
      </h2>
      <div class="sensors-grid">
        <div *ngFor="let sensor of sensors" class="sensor-card" [attr.data-status]="sensor.status">
          <div class="card-header">
            <div class="sensor-icon">{{ sensor.icon }}</div>
            <div class="sensor-info">
              <h3>{{ sensor.name }}</h3>
              <span class="timestamp">{{ sensor.timestamp | date: 'HH:mm:ss' }}</span>
            </div>
            <div class="status-badge" [style.background-color]="getStatusColor(sensor.status)">
              {{ getStatusText(sensor.status) }}
            </div>
          </div>
          
          <div class="sensor-value">
            <span class="value">{{ sensor.value }}</span>
            <span class="unit">{{ sensor.unit }}</span>
          </div>

          <div class="progress-container">
            <div class="progress-bar">
              <div class="progress-fill" 
                   [style.width.%]="getPercentage(sensor)"
                   [style.background-color]="getStatusColor(sensor.status)">
              </div>
            </div>
            <div class="progress-labels">
              <span>{{ sensor.min }}{{ sensor.unit }}</span>
              <span>{{ sensor.max }}{{ sensor.unit }}</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Devices Section -->
    <section class="section">
      <h2 class="section-title">
        <span class="title-icon">锔</span>
        Control de Dispositivos
      </h2>
      <div class="devices-grid">
        <div *ngFor="let device of devices" class="device-card">
          <div class="card-header">
            <div class="device-icon">{{ device.icon }}</div>
            <div class="device-info">
              <h3>{{ device.name }}</h3>
              <span class="timestamp">{{ device.lastUpdate | date: 'HH:mm:ss' }}</span>
            </div>
          </div>

          <div class="device-status">
            <div class="status-badge-large" [style.background-color]="getStatusColor(device.status)">
              {{ getStatusText(device.status) }}
            </div>
          </div>

          <div class="device-controls">
            <button class="control-button" (click)="toggleDevice(device.id)">
              <span class="button-icon"></span>
              Cambiar Estado
            </button>

            <div class="level-control" *ngIf="device.level !== undefined">
              <label>
                <span *ngIf="device.type === 'blinds'">Apertura:</span>
                <span *ngIf="device.type === 'fan'">Velocidad:</span>
                <strong>{{ device.level }}%</strong>
              </label>
              <input 
                type="range" 
                min="0" 
                max="100" 
                [value]="device.level"
                (input)="onLevelChange(device.id, $event)"
                class="slider"
              />
            </div>
          </div>

          <div class="device-visual">
            <div *ngIf="device.type === 'blinds'" class="blinds-visual">
              <div class="blinds-container">
                <div class="blinds-level" [style.height.%]="device.level"></div>
              </div>
            </div>
            <div *ngIf="device.type === 'fan'" class="fan-visual">
              <div class="fan-blades" 
                   [class.spinning]="device.status === 'on'"
                   [style.animation-duration]="(100 / (device.level || 1)) + 's'">
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Info Section -->
    <section class="section info-section">
      <div class="info-card">
        <div class="info-icon"></div>
        <div class="info-content">
          <h3>Control por Voz</h3>
          <p>Utiliza comandos de Alexa para controlar las persianas y el ventilador del sal贸n</p>
        </div>
      </div>
      <div class="info-card">
        <div class="info-icon"></div>
        <div class="info-content">
          <h3>Alertas Autom谩ticas</h3>
          <p>El sistema te notificar谩 cuando los valores est茅n fuera del rango 贸ptimo</p>
        </div>
      </div>
      <div class="info-card">
        <div class="info-icon"></div>
        <div class="info-content">
          <h3>Monitoreo Continuo</h3>
          <p>Datos actualizados en tiempo real desde los sensores del sal贸n</p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <p>Dashboard IoT - Sistema de Control Inteligente para Aulas | 2025</p>
  </footer>
</div>
